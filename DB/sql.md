# SELECT(検索)

## 演習1.テーブルからデータを取り出す

####【解説】
- syain_masterテーブルに格納されている、すべての列(カラム)と行(レコード)を取り出しましょう。

####【文法】

```sql
SELECT * FROM テーブル名;
```

#### [回答1]()

## 演習2.カラムを指定してデータを取りだす

#### 【解説】
- テーブルに格納されているデータから、必要なカラム(name,address)だけを指定して取り出しましょう。

#### 【文法】

```sql
SELECT カラム名,カラム名・・・ FROM テーブル名;
```

#### [回答2]()


## 演習3.カラムに別名をつける

#### 【解説】
- カラムに別名をつけてレコードを取り出しましょう。
 - no → 社員番号
 - name → 名前
 - age → 年齢
 - tel → 電話番号
 - address　→ 住所
 - siten_code → 支店コード


#### 【文法】
```sql
SELECT カラム名 AS 別名 FROM テーブル名
```

#### [回答]()


## 演習4.レコードを指定してデータを取り出す

#### 【解説】
- テーブルに格納されているデータから、必要なレコードだけを指定して取り出しましょう。
 - syain_masterのテーブルから「no」が1のレコードだけを取り出してください

#### 【文法】
```sql
SELECT * FROM テーブル名 WHERE カラム名 = 値;
```

#### [回答]()


## 演習5.レコードを指定してデータを取り出す

#### 【解説】
- テーブルに格納されているデータから、ある値以上のカラムを持ちレコードだけを指定して取り出しましょう。

| 演算子     |               解説                     |
|:-----------|---------------------------------------:|
| =          | 右辺と左辺が等しい場合、真を返す。     |
| <>または!= | 右辺と左辺が異なる場合、真を返す。     |
| >          | 左辺が右辺よりも大きい場合、真を返す。 |
| >=         | 左辺が右辺よりも大きい場合、真を返す。 |
| <          | 右辺が左辺よりも大きい場合、真を返す。 |
| <=         | 右辺が左辺以上の場合、真を返す。       |

#### 【文法】
```sql
SELECT * FROM テーブル名 WHERE カラム名 >= 値;
```

   または、
   
```sql
SELECT * FROM テーブル名 WHERE 値 <= カラム名;
```

#### [回答]()

## 演習6.レコードを指定してデータを取り出す

#### 【解説】
- テーブルに格納されているデータから、空(NULL)の値を持つレコードだけを指定して取り出しましょう
 - カラム名：　tel

#### 【文法】
```sql
SELECT * FROM テーブル名 WHERE カラム名 IS NULL;
```

#### [回答]()


## 演習7.パターンマッチング

#### 【解説】
- 「LIKE」を使うことで、文字列が部分的に一致しているレコードを検索することが出来ます。
- 「LIKE」では、メタ文字と呼ばれるワイルドカードを指定します。メタ文字には「%」と「_(アンダーバー)」があります。
 - %: 任意の文字列
 - _: 任意の一文字

| 検索対象文字列 | '山田%'で検索 | '山田_'で検索 | '山田_ _'で検索 |
|:-----------|------------:|:------------:|:------------:|
| 山田太郎 | 真 | 偽 | 真 |
| 山田豊 | 真 | 真 | 偽 |

- さまざまな指定が可能です

| 検索対象文字列 | '沖縄%'で検索 | '%沖縄%'で検索 | '%沖縄'で検索 |
|:-----------|------------:|:------------:|:------------:|
| 沖縄の空 | 真 | 真 | 偽 |
| 今の沖縄の天気 | 偽 | 真 | 偽 |
| 美ら島沖縄 | 偽 | 真 | 真 |

- syain_masterテーブルから、那覇市在住の人だけを取り出してみましょう
- また、syain_masterテーブルからaddressに「大名」という地方が含まれている人だけを取り出してみましょう。

#### 【文法】
```sql
SELECT * FROM テーブル名
WHERE カラム名 LIKE '検索文字';
```

#### [回答]()


## 演習8.条件の組み合わせ

#### 【解説】
- WHERE句の条件文は、論理演算子(AND、OR)で組み合わせることが出来ます。
- ANDを日本語で表すと「かつ」、
ORは「または」となります。
 - 条件1 AND 条件2: 条件1と条件2が両方真の場合、真。
 - 条件2 AND 条件2: 条件1と条件2のいずれかが真の場合、真。
- syain_masterテーブルから「那覇市在住」かつ「siten_code」が2のレコードだけを取り出しましょう。
- また、syain_masterテーブルから「siten_code」が1または3のレコードだけを取り出しましょう

#### 【文法】
**ANDを使用する場合**
```sql
SELECT * FROM テーブル名
WHERE 条件1 AND 条件2;
```

**ORを使用する場合**
```sql
SELECT * FROM テーブル名
WHERE 条件1 OR 条件2;
```

#### [回答]()


## 演習9.算術演算子で計算を行う

#### 【解説】
- テーブルかた取得したデータで計算を行いましょう。
- syouhinテーブルから商品名(syouhinmei)と単価(tanka)を取り出して単価は、消費税(* 1.08)込みの値にして下さい。

#### 【文法】
- 算術演算子には、以下の種類があります。
- 演算子には優先順位があるので、注意しましょう。

| 演算子 | 解説 | 優先順位 |
|:-----------|------------:|:------------:|
| + | 足し算 | 低 |
| - | 引き算 | 低 |
| * | 掛け算 | 高 |
| / | 割り算 | 高 |
| % | 余りを求める | 高 |

例：
```sql
SELECT カラム + 10 FROM テーブル名;
```

#### [回答]()


## 演習10.関数で集計を行う

#### 【解説】
- 集約関数という便利な集計関数機能を使ってみましょう
- syain_masterテーブルで社員数を求めてみましょう
- syain_masterテーブルで社員の平均年齢を求めてください

#### 【文法】

| 関数 | 解説 |
|:-----------|------------:|
| COUNT() | レコード数を求める |
| SUM() | 合計を求める |
| AVG() | 平均を求める |
| MIN() | 最小値を求める |
| MAX() | 最大値を求める |

#### [回答]()


## 演習11.CASEで条件分岐する

#### 【解説】

- CASEはJava言語で言うif文と同等の機能と考えてください
- 社員の年齢に応じたキャリアを表示してください
 - 30歳以下：　若手
 - 40歳以下：　中堅
 - それ以上：　ベテラン

#### 【文法】

```sql
SELECT
  CASE
    WHEN 条件1 THEN 値1
    WHEN 条件1 THEN 値1
    ELSE 値3
  END
FROM テーブル名;
```

#### [回答]()


## 演習12.検索結果をソートする

#### 【解説】
- ORDER BYを用いて、検索結果を並べ替えましょう。
 - ASC: 昇順にソートする(省略可)
 - DESC: 降順にソートする
- syain_masterテーブルを社員の年齢順(上に行くほど若くなる)で表示してください。

#### 【文法】
**昇順にソート**
```sql
SELECT * FROM テーブル名
ORDER BY カラム名 (ASC);
```

**降順にソート**
```sql
SELECT * FROM テーブル名
ORDER BY カラム名 DESC;
```

#### [回答]()


## 演習13.検索結果をグループ化する

#### 【解説】
- グループ化とは、同列内の値の中で、同じ値を持つデータごとに集合化することをいいます。
- グループ化にはGROUP BYを使用します。
- syouhinテーブルは同一のメーカー(maker)が重複しています。メーカー毎に1レコードとして表示して下さい。
- また、メーカー毎に、扱っている商品数を集計して表示して下さい

#### 【文法】
```sql
SELECT カラム名 FROM テーブル名
GROUP BY カラム名;
```

#### [回答]()


## 演習14.複数の検索結果を一つの表にまとめる

#### 【解説】
- UNIONを使用すると複数の表を一つの表として検索結果に表示出来ます。
- 以下の社員名(syain_master.nama)とアルバイト名(Arbeit.name)の検索結果を一つの表にて表示してみましょう。

#### 【文法】
```sql
SELECT カラム名 FROM テーブル名
UNION
SELECT カラム名 FROM テーブル名;
```

#### [回答]()


## 演習15.内部結合でデータを取り出す

#### 【解説】
- 内部結合を用いて、複数のテーブルから必要な情報を取り出しましょう。
- 以下のように、商品名やメーカー商品テーブル、在庫数を在庫管理テーブルで管理していたとします。

#### 【文法】
```sql
SELECT カラム名
FROM テーブル名1 INNER JOIN テーブル名2
ON 条件;
```
- テーブル名1とテーブル名2には、それぞれ商品テーブルと在庫管理テーブルを記述します。
- 条件は、キーである「コード」が一致していることです。商品テーブルのコードは「syouhin.code」、在庫管理テーブルのコードは「zaiko.code」と記述します


#### [回答]()


## 演習16.外部結合でデータを取り出す

#### 【解説】
- 商品テーブルに新規レコードを追加しましたが、在庫管理テーブルは以前のままです。この状態で内部結合を行うと、どのようになるでしょうか？

以下が内部結合の実行結果です。商品テーブルに追加した新規レコードの存在が無視されています。

![イメージ図]()

- 外部結合とは、結合する左右のテーブルのどちらを優先させるかを指定することです。
- 今回は左側の商品テーブルのレコードを優先したいので、INNER JOIN ではなく「LEFT JOIN」を指定します。
- 商品テーブルと在庫管理テーブルをLEFT JOINで結合し、一つの表にして表示してみましょう。

#### 【文法】
```sql
SELECT カラム名
FROM テーブル名1 LEFT JOIN テーブル名2
ON 条件;
```

#### [回答]()
